{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./src/index.js","webpack:///external {\"this\":[\"wp\",\"element\"]}"],"names":["__","wp","i18n","editPost","PluginSidebar","PluginSidebarMoreMenuItem","components","PanelBody","TextControl","element","Component","Fragment","withSelect","data","compose","registerPlugin","plugins","el","createElement","iconEl","width","height","src","buttonClass","activeButtonClass","downArrow","upArrow","Notification","props","statusMessage","publishingError","discoursePermalink","StatusMessage","ErrorMessage","message","DiscoursePermalink","permalink","encodeURI","link","PublishingOptions","handleChange","bind","e","handlePublishMethodChange","target","value","publishingMethod","PublishToDiscourse","handleToBePublishedChange","handlePublishChange","checked","publishToDiscourse","publishedOnWordPress","postStatus","busy","CategorySelect","handleCategoryChange","discourseCategories","cats","Object","values","options","map","cat","id","parseInt","category_id","name","LinkToDiscourseTopic","state","isBusy","topicUrl","handleClick","setState","handleLinkTopicClick","UnlinkFromDiscourse","showPanel","togglePanel","handleUnlinkFromDiscourseChange","UpdateDiscourseTopic","handleUpdateChange","TagTopic","chosenTags","tags","inputContent","inputLength","maxTagsExceeded","handleKeyPress","focusInput","tagInput","focus","val","length","keyVal","key","currentChoices","maxTags","push","trim","replace","sanitizeArray","handleTagChange","index","indexOf","splice","allowTags","maxTagsNotice","tagDisplay","tag","input","arr","sort","reduce","accumulator","current","PinTopic","pinTopic","pinUntil","handleUpdateDate","handleToBePinnedChange","handlePinChange","DiscourseSidebar","published","publishPostCategory","pluginOptions","defaultCategory","topicTags","discoursePostId","busyUnlinking","busyUpdating","busyLinking","busyPublishing","updateStateFromDatabase","postId","getDiscourseCategories","apiRequest","path","method","get_categories_nonce","then","err","isAllowedPostType","postType","post","type","postRouteName","apiFetch","meta","wpdc_publishing_error","publish_to_discourse","discourse_post_id","status","publish_post_category","wpdc_topic_tags","split","wpdc_pin_topic","wpdc_pin_until","discourse_permalink","allowedPostTypes","set_publish_meta_nonce","categoryId","set_category_meta_nonce","set_pin_meta_nonce","tagString","join","set_tag_meta_nonce","link_topic_nonce","topic_url","responseJSON","unlink_post_nonce","publish_topic_nonce","success","publish_response","update_topic_nonce","response","update_response","prevProps","prevPost","prevMeta","wpdc_publishing_response","isPublished","actions","HOC","select","forceIsSaving","getCurrentPostId","getCurrentPost","icon","render"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","/*jshint esversion: 6*/\n/**\n * Internal block libraries.\n */\n\nconst { __ } = wp.i18n;\n\nconst {\n    PluginSidebar,\n    PluginSidebarMoreMenuItem\n} = wp.editPost;\n\nconst {\n    PanelBody,\n    TextControl\n} = wp.components;\n\nconst {\n    Component,\n    Fragment\n} = wp.element;\n\nconst { withSelect } = wp.data;\n\nconst { compose } = wp.compose;\n\nconst { registerPlugin } = wp.plugins;\n\nconst el = wp.element.createElement;\n\n// See: https://wp.zacgordon.com/2017/12/07/how-to-add-custom-icons-to-gutenberg-editor-blocks-in-wordpress/\nconst iconEl = el( 'img', {\n    width: 20,\n    height: 20,\n    src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUYxNjlGNkY3NjAxMTFFNjkyRkZBRTlDQTMwREJDQzUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUYxNjlGNzA3NjAxMTFFNjkyRkZBRTlDQTMwREJDQzUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRjE2OUY2RDc2MDExMUU2OTJGRkFFOUNBMzBEQkNDNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRjE2OUY2RTc2MDExMUU2OTJGRkFFOUNBMzBEQkNDNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq7th6IAAAP8SURBVHjalFbbT5tlHH56grKWnicw5ijdAjNGg5CxbPGIM7qx7cIlxihxd7oLr/wHlpgsu/FWjbdeeOWFwUQixmW6GGbKpDKcgqhj7AA90CM9t/j8Xr+vKZW08Gue0O/jfZ/n/R3fGg73+dHE2ogzxEvEU4SPMBJxYon4kZjUnnc0QxOBD4j3iX40txjxKfEhUdqNwJPE58SwWmAwoFQqoVQsolqtwmgyoa2tDWazGVtbW/X7FokJYrb+pbGB/DliTsiNRiPyuRw2YjEY+HF7fejqOQCHw4FcNotoOKyEZZ1mg0SQeKWe0Fz3PUBck3cGCepGDE6XG8dOnIQ/cBgutwcmnrpcLiEaieB2KIRfgj+jnd54fT5UKhWdZ1oTW2oUmFTkDEl8Y4OkAbx69jwOPn5IhaO76zH0dHfB7Xaj3WpFMpXGt1Pf4KOrV7Fy9x/4+wMUL+tcX2sitRxckkQJeTIRRy9J35h4B06nEz6vFyPDQ/D3HYKJ8W+0UGgeFyfexh93fqeIv94TKZCPdYH7RK/EVBJ54c23MHD0CXXiU2MvorPT3rSM7q7cw8ljo8xZFr79+xUH7SFxUDL0gpDLm81MBkcGj6qY2237cOrl1uRi4t3lK1dQYojy+Zz++gAxJgJj8iQlJyHo6e1VZTgy/Aw67a3JdXvt9GmcePZ5hjihSlszJTAg38QtIXY4nHC5nAgE+rEX28fED42MwGazq/LVS1cEOvQn8UKEfCy7Dmv7ngTyhbyKv4coFAr6a58IqNqShimyW1OpJOx2G/ZqaZatgRxWelKt1ippq9aGErdKpYzVlRWeprBngYeP1lApVxSMhhptZNuosDGpfy0t4vr31+rruaWtcWys3n9AL5LIpFOwWCz6v37bJmC1dnBBGqG5ORRK5V2RS1hv3gyqA/29/CcS8Q20tdfyN10/Kv5rdYZq9Pgoq6J1ktPpDG78NIP1cASRSBi/3rrFsWJRHKyYZS6Z2SZQZOzFi7Pj402Js9kcVu6tYmHhDuLJJDY3M5ia/Arh9Udwe7z6GL/cOOwQjUVxZvwchoaeRjyRxPztBczOztKzCr06rhovzW6PcYTH2VClYkkNuh++m8Yyc+fkINTIZ4gv/icgwy3HeXLp3fcQDM5ifW1dzReLxYwjA4Po4wiRNSazCSkKPFhdxfLiIkOVgsvjUZVIgRSpXq+/0b7k3wvyINlPcGMkGoHD3qlq2sLulubLMgxym0kIhahYLCgPbDabGt/ayRPabJvf6cJRLS4bBI2mSCgk1SKTRkaCsdOoiDVy+QFwUYZr443Wvat6JImcXC6f+tGinfYT4rOdtsnqKSkMfWS0MIOGtEZ8g7jebMO/AgwANr2XXAf8LaoAAAAASUVORK5CYII='\n});\n\nconst buttonClass = 'components-button is-button is-default is-primary is-large wpdc-button';\nconst activeButtonClass = 'components-button is-button is-default is-primary is-large wpdc-button active';\nconst downArrow = ( <svg\n    className={ 'components-panel__arrow' } width='24px' height='24px' viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg' role='img' aria-hidden='true' focusable='false'>\n    <g>\n        <path fill={ 'none' } d={ 'M0,0h24v24H0V0z' }/>\n    </g>\n    <g>\n        <path d={ 'M7.41,8.59L12,13.17l4.59-4.58L18,10l-6,6l-6-6L7.41,8.59z' }/>\n    </g>\n</svg> );\n\nconst upArrow = ( <svg\n    className={ 'components-panel__arrow' } width='24px' height='24px' viewBox='0 0 24 24'\n    xmlns='http://www.w3.org/2000/svg' role='img' aria-hidden='true' focusable='false'>\n    <g>\n        <path fill={ 'none' } d={ 'M0,0h24v24H0V0z' }/>\n    </g>\n    <g>\n        <path d={ 'M12,8l-6,6l1.41,1.41L12,10.83l4.59,4.58L18,14L12,8z' }/>\n    </g>\n</svg> );\n\nclass Notification extends Component {\n    constructor( props ) {\n        super( props );\n    }\n\n    render() {\n        return (\n            <div>\n                <StatusMessage statusMessage={this.props.statusMessage}/>\n                <ErrorMessage publishingError={this.props.publishingError}/>\n                <DiscoursePermalink discoursePermalink={this.props.discoursePermalink}/>\n            </div>\n        );\n    }\n}\n\nclass StatusMessage extends Component {\n    constructor( props ) {\n        super( props );\n    }\n\n    render() {\n        const statusMessage = this.props.statusMessage;\n\n        if ( statusMessage ) {\n            return (\n                <div className={ 'wpdc-publishing-response success' }>{ statusMessage }</div>\n            );\n        }\n        return '';\n    }\n}\n\nclass ErrorMessage extends Component {\n    constructor( props ) {\n        super( props );\n    }\n\n    render() {\n        const publishingError = this.props.publishingError;\n\n        if ( publishingError ) {\n            let message;\n            switch ( publishingError ) {\n                case 'deleted_topic':\n                    message = __( 'Your post could not be published to Discourse. The associated Discourse topic may have been deleted. ' +\n                        'Unlink the post so that it can be published again.', 'wp-discourse' );\n                    break;\n                case 'Not Found':\n                    message = __( 'Your post could not be updated on Discourse. The associated Discourse topic may have been deleted. ' +\n                        'Unlink the post so that it can be published again.', 'wp-discourse' );\n                    break;\n                case 'queued_topic':\n                    message = __( 'Your post has been added to the Discourse approval queue. When it has been approved, you will need to link it to Discourse by' +\n                        'selecting the \\'Link to Existing Topic\\' option.', 'wp-discourse' );\n                    break;\n                case 'Unprocessable Entity':\n                    message = __( 'Your post could not be published to Discourse. There may be an existing Discourse topic that is using its permalink. Try linking the post with that topic.', 'wp-discourse' );\n                    break;\n                case 'Forbidden':\n                    message = __( 'Your post could not be published to Discourse. Check that your Discourse Username is set correctly on your WordPress profile page.', 'wp-discourse' );\n                    break;\n                default:\n                    message = publishingError;\n            }\n\n            return <div className={ 'wpdc-publishing-response error' }>{ message }</div>;\n        }\n        return '';\n    }\n}\n\nclass DiscoursePermalink extends Component {\n    constructor( props ) {\n        super( props );\n    }\n\n    render() {\n        if ( this.props.discoursePermalink ) {\n            const permalink = encodeURI( this.props.discoursePermalink );\n            const link = <a href={ permalink } className={ 'wpdc-permalink-link' } target={ '_blank' }>{ permalink }</a>;\n            return <div className={ 'wpdc-permalink' }>{ __( 'Your post is linked with', 'wp-discourse' ) } { link }</div>;\n        }\n        return '';\n    }\n}\n\nclass PublishingOptions extends Component {\n    constructor( props ) {\n        super( props );\n\n        this.handleChange = this.handleChange.bind( this );\n    }\n\n    handleChange( e ) {\n        this.props.handlePublishMethodChange( e.target.value )\n    }\n\n    render() {\n        return (\n            <div className={ 'wpdc-publishing-options' }>\n                <h2 className={'wpdc-sidebar-title'}>{ __( 'Publishing Options', 'wp-discourse' ) }</h2>\n                <label>\n                    <input type='radio' name='wpdc_publish_options' value='publish_post'\n                           checked={'publish_post' === this.props.publishingMethod}\n                           onChange={this.handleChange}/>\n                    { __( 'New Topic', 'wp-discourse' ) }\n                </label>\n                <br/>\n                <label>\n                    <input type='radio' name='wpdc_publish_options' value='link_post'\n                           checked={ 'link_post' === this.props.publishingMethod }\n                           onChange={this.handleChange}/>\n                    { __( 'Link to Existing Topic', 'wp-discourse' ) }\n                </label>\n                <hr className={ 'wpdc-sidebar-hr' }/>\n            </div>\n        );\n    }\n}\n\nclass PublishToDiscourse extends Component {\n    constructor( props ) {\n        super( props );\n\n        this.handleToBePublishedChange = this.handleToBePublishedChange.bind( this );\n        this.handlePublishChange = this.handlePublishChange.bind( this );\n    }\n\n    handleToBePublishedChange( e ) {\n        this.props.handleToBePublishedChange( e.target.checked );\n    }\n\n    handlePublishChange( e ) {\n        this.props.handlePublishChange( e );\n    }\n\n    render() {\n        const publishToDiscourse = this.props.publishToDiscourse,\n            publishedOnWordPress = 'publish' === this.props.postStatus;\n\n        if ( !publishedOnWordPress ) {\n            return (\n                <div className={ 'wpdc-component-panel-body' }>\n                    <h2 className={ 'wpdc-sidebar-title' }>{ __( 'Publish to Discourse', 'wp-discourse' ) }</h2>\n                    <div className={ 'wpdc-publish-topic' }>\n                        <input type='checkBox' className={ 'wpdc-publish-topic-checkbox' }\n                               checked={ publishToDiscourse } onChange={ this.handleToBePublishedChange }/>\n                        { __( 'Publish', 'wp-discourse' ) }\n                        <p className={'wpdc-info'}>\n                            { __( 'Automatically publish the post to Discourse when it is published on WordPress.', 'wp-discourse' ) }\n                        </p>\n                    </div>\n                </div>\n            );\n        } else {\n            return (\n                <div className={'wpdc-component-panel-body'}>\n                    <h2 className={'wpdc-sidebar-title'}>{ __( 'Publish to Discourse', 'wp-discourse' ) }</h2>\n                    <button className={ this.props.busy ? activeButtonClass : buttonClass }\n                            onClick={this.handlePublishChange}>{ __( 'Publish to Discourse', 'wp-discourse' ) }\n                    </button>\n                </div>\n            );\n        }\n    }\n}\n\nclass CategorySelect extends Component {\n    constructor( props ) {\n        super( props );\n\n        this.handleChange = this.handleChange.bind( this );\n    }\n\n    handleChange( e ) {\n        this.props.handleCategoryChange( e.target.value );\n    }\n\n    render() {\n        if ( this.props.discourseCategories ) {\n            const cats = Object.values( this.props.discourseCategories );\n            const options = cats.map( ( cat ) =>\n                <option value={ cat.id }\n                        selected={ parseInt( this.props.category_id, 10 ) === parseInt( cat.id, 10 ) }>{ cat.name }</option>\n            );\n            return (\n                <div className={ 'wpdc-category-select wpdc-component-panel-body' }>\n                    <h2 className={ 'wpdc-sidebar-title' }>{__( 'Category', 'wp-discourse' ) }</h2>\n                    <select onChange={ this.handleChange } className={ 'widefat' }>\n                        { options }\n                    </select>\n                    <hr className={ 'wpdc-sidebar-hr' }/>\n                </div>\n            );\n        } else {\n            // Todo: handle this.\n            return null;\n        }\n    }\n}\n\nclass LinkToDiscourseTopic extends Component {\n    constructor( props ) {\n        super( props );\n\n        this.state = {\n            isBusy: false,\n            topicUrl: null,\n        };\n\n        this.handleChange = this.handleChange.bind( this );\n        this.handleClick = this.handleClick.bind( this );\n    }\n\n    handleChange( e ) {\n        this.setState( { topicUrl: e.target.value } )\n    }\n\n    handleClick( e ) {\n        this.props.handleLinkTopicClick(this.state.topicUrl);\n    }\n\n    render() {\n        return (\n            <div className={ 'wpdc-link-post wpdc-component-panel-body' }>\n                <h2 className={ 'wpdc-sidebar-title' }>{ __( 'Topic URL', 'wp-discourse' ) }</h2>\n                <input\n                    type='url'\n                    className={ 'widefat wpdc-topic-url-input' }\n                    onChange={ this.handleChange }\n                    value={ this.state.topicUrl }\n                />\n\n                <button className={ this.props.busy ? activeButtonClass : buttonClass }\n                        onClick={ this.handleClick }>\n                    { __( 'Link With Discourse', 'wp-discourse' ) }\n                </button>\n            </div>\n        )\n    }\n}\n\nclass UnlinkFromDiscourse extends Component {\n    constructor( props ) {\n        super( props );\n        this.state = {\n            showPanel: false\n        };\n        this.handleClick = this.handleClick.bind( this );\n        this.togglePanel = this.togglePanel.bind( this );\n    }\n\n    handleClick( e ) {\n        this.props.handleUnlinkFromDiscourseChange( e );\n    }\n\n    togglePanel() {\n        this.setState( { showPanel: !this.state.showPanel } );\n    }\n\n    render() {\n        return (\n            <div className={ 'wpdc-component-panel-body' }>\n                <h2 className={ 'wpdc-panel-section-title' }>\n                    <button type='button' aria-expanded='false'\n                            className={ 'components-button components-panel__body-toggle' }\n                            onClick={ this.togglePanel }>\n                            <span aria-hidden='true'>\n                                { this.state.showPanel ? upArrow : downArrow }\n                            </span>\n                        { __( 'Unlink From Discourse', 'wp-discourse' ) }\n                    </button>\n                </h2>\n                <div className={ !this.state.showPanel ? 'hidden' : '' }>\n                    <p className={ 'wpdc-info' }>\n                        { __( 'Unlinking the post from Discourse will remove all Discourse metadata from the post.', 'wp-discourse' ) }\n                    </p>\n                    <button className={ this.props.busy ? activeButtonClass : buttonClass }\n                            onClick={ this.handleClick }>{ __( 'Unlink Post', 'wp-discourse' ) }\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass UpdateDiscourseTopic extends Component {\n    constructor( props ) {\n        super( props );\n        this.state = {\n            showPanel: false,\n        };\n        this.handleClick = this.handleClick.bind( this );\n        this.togglePanel = this.togglePanel.bind( this );\n    }\n\n    togglePanel() {\n        this.setState( { showPanel: !this.state.showPanel } );\n    }\n\n    handleClick( e ) {\n        this.props.handleUpdateChange( e );\n    }\n\n    render() {\n        return (\n            <div className={ 'wpdc-component-panel-body' }>\n                <h2 className={ 'wpdc-panel-section-title' }>\n                    <button type='button' aria-expanded='false'\n                            className={ 'components-button components-panel__body-toggle' }\n                            onClick={ this.togglePanel }>\n                            <span aria-hidden='true'>\n                                { this.state.showPanel ? upArrow : downArrow }\n                            </span>\n                        { __( 'Update Discourse Topic', 'wp-discourse' ) }\n                    </button>\n                </h2>\n                <div className={ !this.state.showPanel ? 'hidden' : '' }>\n                    <p className={ 'wpdc-info' }>\n                        { __( 'Update the Discourse topic to the lastest saved version of the post.', 'wp-discourse' ) }\n                    </p>\n                    <button className={ this.props.busy ? activeButtonClass : buttonClass }\n                            onClick={ this.handleClick }>\n                        { __( 'Update Topic', 'wp-discourse' ) }\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass TagTopic extends Component {\n    constructor( props ) {\n        super( props );\n\n        this.state = {\n            chosenTags: this.props.tags,\n            inputContent: '',\n            inputLength: 1,\n            maxTagsExceeded: false\n        };\n\n        this.handleKeyPress = this.handleKeyPress.bind( this );\n        this.handleChange = this.handleChange.bind( this );\n        this.handleClick = this.handleClick.bind( this );\n        this.focusInput = this.focusInput.bind( this );\n    }\n\n    focusInput( e ) {\n        this.tagInput.focus();\n    }\n\n    handleChange( e ) {\n        const val = e.target.value;\n        this.setState( {\n            inputContent: ',' === val ? '' : val,\n            inputLength: val.length === 0 ? 1 : val.length,\n        } );\n    }\n\n    handleKeyPress( e ) {\n        const keyVal = e.key;\n        const val = e.target.value;\n\n        if ( 'Enter' === keyVal || ',' === keyVal ) {\n            let currentChoices = this.state.chosenTags;\n            if ( currentChoices.length >= this.props.maxTags ) {\n                this.setState( {\n                    maxTagsExceeded: true,\n                    inputContent: '',\n                } );\n                return null;\n            }\n            currentChoices.push( val.trim().replace( / /g, '-' ) );\n            currentChoices = TagTopic.sanitizeArray( currentChoices );\n            this.setState( {\n                chosenTags: currentChoices,\n                inputContent: '',\n            }, () => {\n                this.props.handleTagChange( currentChoices );\n            });\n        }\n    }\n\n    handleClick( key ) {\n        let tags = this.state.chosenTags,\n            index = tags.indexOf( key );\n        if ( index > -1 ) {\n            tags.splice( index, 1 );\n            this.setState( {\n                chosenTags: tags,\n                maxTagsExceeded: false\n            }, () => {\n                this.props.handleTagChange( tags );\n            });\n        }\n    }\n\n    static sanitizeArray( arr ) {\n        arr = arr.sort().reduce( ( accumulator, current ) => {\n            const length = accumulator.length;\n            if ( ( 0 === length || accumulator[length - 1] !== current) && current.trim() !== '' ) {\n                accumulator.push( current );\n            }\n            return accumulator;\n        }, [] );\n        return arr;\n    }\n\n    render() {\n        if ( this.props.allowTags ) {\n            let maxTagsNotice = this.state.maxTagsExceeded ? __( 'You have exceeded the maximum number of allowed tags for your site. Remove a tag to add more.', 'wp-discourse' ) : '';\n            let tagDisplay = TagTopic.sanitizeArray( this.state.chosenTags );\n            tagDisplay = tagDisplay.map( ( tag, index ) =>\n                <span className={ 'components-form-token-field__token' } key={ tag }>\n                    <span className={ 'components-form-token-field__token-text' }>\n                        <span className={ 'screen-reader-text' }>{ tag }</span>\n                        <span aria-hidden='true'>{ tag }</span>\n                    </span>\n                    <button type='button'\n                            aria-label='Remove Tag'\n                            className={ 'components-button components-icon-button components-form-token-field__remove-token' }\n                            onClick={ this.handleClick.bind( this, tag ) }\n                            key={ tag }\n                    >\n                        <svg aria-hidden='true'\n                             role='img'\n                             focusable='false'\n                             className={'dashicon dashicons-dismiss'}\n                             xmlns='http://www.w3.org/2000/svg'\n                             width='20' height='20' viewBox='0 0 20 20'>\n                            <path\n                                d={ 'M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm5 11l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z' }/>\n                        </svg>\n                    </button>\n                </span>\n            );\n            return (\n                <div className={ 'wpdc-component-panel-body' }>\n                    <h2 className={ 'wpdc-sidebar-title' }>{__( 'Tags', 'wp-discourse' ) }</h2>\n                    <div className={ 'components-form-token-field__input-container' } onClick={ this.focusInput }>\n                        { tagDisplay }\n                        <input type={ 'text' }\n                               size={ this.state.inputLength }\n                               className={ 'components-form-token-field__input' }\n                               onChange={ this.handleChange }\n                               onKeyPress={ this.handleKeyPress }\n                               value={ this.state.inputContent }\n                               ref={ input => {\n                                   this.tagInput = input;\n                               } }\n                        />\n                    </div>\n                    <div className={ this.state.maxTagsExceeded ? 'wpdc-info' : ''}>\n                        { maxTagsNotice }\n                    </div>\n                    <hr className={ 'wpdc-sidebar-hr' }/>\n                </div>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n\nclass PinTopic extends Component {\n    constructor( props ) {\n        super( props );\n\n        this.state = {\n            pinTopic: this.props.pinTopic,\n            pinUntil: this.props.pinUntil\n        };\n\n        this.handleUpdateDate = this.handleUpdateDate.bind( this );\n        this.handleToBePinnedChange = this.handleToBePinnedChange.bind( this );\n    }\n\n    handleUpdateDate( e ) {\n        this.setState( { pinUntil: e.target.value } );\n        this.props.handlePinChange( this.state.pinTopic, e.target.value )\n    }\n\n    handleToBePinnedChange( e ) {\n        this.setState( { pinTopic: e.target.checked } );\n        this.props.handlePinChange( e.target.checked, this.state.pinUntil );\n    }\n\n    render() {\n        return (\n            <div className={ 'wpdc-component-panel-body' }>\n                <h2 className={ 'wpdc-sidebar-title' }>{__( 'Pin Topic', 'wp-discourse' ) }</h2>\n                <label>\n                    <input type={ 'checkbox' } onChange={ this.handleToBePinnedChange } checked={ this.state.pinTopic }/>\n                    { __( 'Pin Discourse Topic', 'wp-discourse' ) }\n                </label>\n                <br/>\n                <label className={ 'wpdc-pin-until-input'}>\n                    { __( 'Pin Until', 'wp-discourse' ) }\n                    <br/>\n                    <input type={ 'date' } className={ 'widefat' } onChange={ this.handleUpdateDate } value={ this.state.pinUntil } />\n                </label>\n                <hr className={ 'wpdc-sidebar-hr' }/>\n            </div>\n        );\n    }\n}\n\nclass DiscourseSidebar extends Component {\n    constructor( props ) {\n        super( props );\n        this.state = {\n            published: false,\n            postStatus: '',\n            publishingMethod: 'publish_post',\n            publishToDiscourse: false,\n            publishPostCategory: pluginOptions.defaultCategory,\n            allowTags: pluginOptions.allowTags,\n            maxTags: pluginOptions.maxTags,\n            topicTags: [],\n            pinTopic: false,\n            pinUntil: null,\n            discoursePostId: null,\n            discoursePermalink: null,\n            publishingError: null,\n            busyUnlinking: false,\n            busyUpdating: false,\n            busyLinking: false,\n            busyPublishing: false,\n            statusMessage: null,\n            discourseCategories: null,\n        };\n\n        this.updateStateFromDatabase( this.props.postId );\n        this.getDiscourseCategories();\n\n        this.handleToBePublishedChange = this.handleToBePublishedChange.bind( this );\n        this.handlePublishChange = this.handlePublishChange.bind( this );\n        this.handleCategoryChange = this.handleCategoryChange.bind( this );\n        this.handleTagChange = this.handleTagChange.bind( this );\n        this.handleUnlinkFromDiscourseChange = this.handleUnlinkFromDiscourseChange.bind( this );\n        this.handlePublishMethodChange = this.handlePublishMethodChange.bind( this );\n        this.handleUpdateChange = this.handleUpdateChange.bind( this );\n        this.handleLinkTopicClick = this.handleLinkTopicClick.bind( this );\n        this.handlePinChange = this.handlePinChange.bind( this );\n    }\n\n    getDiscourseCategories() {\n        wp.apiRequest( {\n            path: '/wp-discourse/v1/get-discourse-categories',\n            method: 'GET',\n            data: {\n                get_categories_nonce: pluginOptions.get_categories_nonce,\n            },\n        } ).then(\n            ( data ) => {\n                this.setState( {\n                        discourseCategories: data,\n                    }\n                );\n            },\n            ( err ) => {\n                return null;\n            }\n        )\n    }\n\n    updateStateFromDatabase( postId ) {\n        if ( this.isAllowedPostType() ) {\n            const postType = this.props.post.type;\n            let postRouteName;\n            switch ( postType ) {\n                case 'post':\n                    postRouteName = 'posts';\n                    break;\n                case 'page':\n                    postRouteName = 'pages';\n                    break;\n                default:\n                    postRouteName = postType;\n            }\n            wp.apiFetch( { path: `/wp/v2/${postRouteName}/${postId}`, method: 'GET' } ).then(\n                ( data ) => {\n                    if ( ! data.meta ) {\n                        return;\n                    }\n                    const meta = data.meta,\n                        publishToDiscourse = ( 'deleted_topic' === meta.wpdc_publishing_error || 'queued_topic' === meta.wpdc_publishing_error ) ? false : 1 === parseInt( meta.publish_to_discourse, 10 );\n                    this.setState( {\n                        published: meta.discourse_post_id > 0,\n                        postStatus: data.status,\n                        publishToDiscourse: publishToDiscourse,\n                        publishPostCategory: meta.publish_post_category > 0 ? meta.publish_post_category : pluginOptions.defaultCategory,\n                        topicTags: meta.wpdc_topic_tags.split( ',' ),\n                        pinTopic: meta.wpdc_pin_topic > 0,\n                        pinUntil: meta.wpdc_pin_until,\n                        discoursePostId: meta.discourse_post_id,\n                        discoursePermalink: meta.discourse_permalink,\n                        publishingError: meta.wpdc_publishing_error,\n                    });\n                    return null;\n                },\n                ( err ) => {\n                    return null;\n                }\n            );\n        }\n    }\n\n    isAllowedPostType() {\n        return pluginOptions.allowedPostTypes.indexOf( this.props.post.type ) >= 0;\n    }\n\n    handlePublishMethodChange( publishingMethod ) {\n        this.setState( { publishingMethod: publishingMethod } );\n    }\n\n    handleToBePublishedChange( publishToDiscourse ) {\n        this.setState( {\n            publishToDiscourse: publishToDiscourse,\n            statusMessage: '',\n        }, () => {\n            wp.apiRequest( {\n                path: '/wp-discourse/v1/set-publish-meta',\n                method: 'POST',\n                data: {\n                    set_publish_meta_nonce: pluginOptions.set_publish_meta_nonce,\n                    id: this.props.postId,\n                    publish_to_discourse: this.state.publishToDiscourse ? 1 : 0,\n                }\n            }).then(\n                ( data ) => {\n                    return null;\n                },\n                ( err ) => {\n                    return null;\n                }\n            );\n        });\n    }\n\n    handleCategoryChange( categoryId ) {\n        this.setState( { publishPostCategory: categoryId }, () => {\n            wp.apiRequest({\n                path: '/wp-discourse/v1/set-category-meta',\n                method: 'POST',\n                data: {\n                    set_category_meta_nonce: pluginOptions.set_category_meta_nonce,\n                    id: this.props.postId,\n                    publish_post_category: categoryId,\n                }\n            } ).then(\n                ( data ) => {\n                    return null;\n                },\n                ( err ) => {\n                    return null;\n                }\n            );\n        });\n    }\n\n    handlePinChange( pinTopic, pinUntil ) {\n        this.setState( {\n            pinTopic: pinTopic,\n            pinUntil: pinUntil\n        }, () => {\n            wp.apiRequest( {\n                path: '/wp-discourse/v1/set-pin-meta',\n                method: 'Post',\n                data: {\n                    set_pin_meta_nonce: pluginOptions.set_pin_meta_nonce,\n                    id: this.props.postId,\n                    wpdc_pin_topic: pinTopic ? 1 : 0,\n                    wpdc_pin_until: pinUntil\n                }\n            } ).then(\n                ( data ) => {\n                    return null;\n                },\n                ( err ) => {\n                    return null;\n                }\n            );\n        });\n    }\n\n    handleTagChange( tags ) {\n        this.setState( { topicTags: tags }, () => {\n            const tagString = tags.join( ',' );\n            wp.apiRequest( {\n                path: '/wp-discourse/v1/set-tag-meta',\n                method: 'POST',\n                data: {\n                    set_tag_meta_nonce: pluginOptions.set_tag_meta_nonce,\n                    id: this.props.postId,\n                    wpdc_topic_tags: tagString,\n                }\n            } ).then(\n                ( data ) => {\n                    return null;\n                },\n                ( err ) => {\n                    return null;\n                }\n            );\n        });\n    }\n\n    handleLinkTopicClick( topicUrl ) {\n        this.setState( {\n            busyLinking: true,\n            statusMessage: '',\n        });\n        wp.apiRequest( {\n            path: '/wp-discourse/v1/link-topic',\n            method: 'POST',\n            data: {\n                link_topic_nonce: pluginOptions.link_topic_nonce,\n                id: this.props.postId,\n                topic_url: topicUrl\n            }\n        }).then(\n            ( data ) => {\n                this.setState( {\n                    busyLinking: false,\n                } );\n\n                if ( data.discourse_permalink ) {\n                    this.setState( {\n                        published: true,\n                        discoursePermalink: data.discourse_permalink,\n                        publishingError: null,\n                    } );\n                } else {\n                    this.setState( {\n                        publishingError: __( 'There has been an error linking your post with Discourse.', 'wp-discourse' )\n                    });\n                }\n                return null;\n            },\n            ( err ) => {\n                const message = err.responseJSON && err.responseJSON.message ? err.responseJSON.message : __( 'There has been an error linking your post with Discourse.', 'wp-discourse' );\n                this.setState( {\n                    busyLinking: false,\n                    published: false,\n                    publishingError: message,\n                } );\n                return null;\n            }\n        );\n    }\n\n    handleUnlinkFromDiscourseChange( e ) {\n        this.setState({\n            busyUnlinking: true,\n            statusMessage: '',\n        });\n        wp.apiRequest( {\n            path: '/wp-discourse/v1/unlink-post',\n            method: 'POST',\n            data: {\n                unlink_post_nonce: pluginOptions.unlink_post_nonce,\n                id: this.props.postId\n            }\n        }).then(\n            ( data ) => {\n                this.setState( {\n                    busyUnlinking: false,\n                    published: false,\n                    publishingMethod: 'link_post',\n                    discoursePermalink: null,\n                    statusMessage: __( 'Your post has been unlinked from Discourse.', 'wp-discourse' )\n                });\n                return null;\n            },\n            ( err ) => {\n                return null;\n            }\n        );\n    }\n\n    handlePublishChange( e ) {\n        this.setState( {\n            busyPublishing: true,\n            statusMessage: '',\n        } );\n        wp.apiRequest( {\n            path: '/wp-discourse/v1/publish-topic',\n            method: 'POST',\n            data: {\n                publish_topic_nonce: pluginOptions.publish_topic_nonce,\n                id: this.props.postId\n            }\n        }).then(\n            ( data ) => {\n                const success = 'success' === data.publish_response;\n                this.setState( {\n                    busyPublishing: false,\n                    published: success,\n                    publishingError: success ? null : data.publish_response,\n                    publishingMethod: data.publish_response = 'Unprocessable Entity' ? 'link_post' : 'publish_post',\n                    discoursePermalink: data.discourse_permalink,\n                } );\n                return null;\n            },\n            ( err ) => {\n                const message = err.responseJSON && err.responseJSON.message ? err.responseJSON.message : __( 'There has been an error linking your post with Discourse.', 'wp-discourse' );\n                this.setState( {\n                    busyPublishing: false,\n                    published: false,\n                    publishingError: message,\n                } );\n                return null;\n            }\n        );\n    }\n\n    handleUpdateChange( e ) {\n        this.setState( {\n            busyUpdating: true,\n            statusMessage: '',\n        } );\n        wp.apiRequest( {\n            path: '/wp-discourse/v1/update-topic',\n            method: 'POST',\n            data: {\n                update_topic_nonce: pluginOptions.update_topic_nonce,\n                id: this.props.postId\n            }\n        }).then(\n            ( data ) => {\n                const response = data.update_response,\n                    success = 'success' === response;\n                let message;\n                if ( success ) {\n                    message = __( 'The Discourse topic has been updated!', 'wp-discourse' );\n                }\n                this.setState( {\n                    busyUpdating: false,\n                    statusMessage: message,\n                    publishingError: success ? null : data.update_response,\n                } );\n                return null;\n            },\n            ( err ) => {\n                const message = __( 'There was an error updating the Discourse topic.', 'wp-discourse' );\n                this.setState( {\n                    busyUpdating: false,\n                    statusMessage: message,\n                } );\n                return null;\n            }\n        );\n    }\n\n    componentDidUpdate( prevProps ) {\n        if ( this.isAllowedPostType() ) {\n            const post = this.props.post,\n                prevPost = prevProps.post,\n                meta = this.props.post.meta,\n                prevMeta = prevProps.post.meta;\n\n            if ( meta &&\n                prevMeta && ( post.status !== prevPost.status ||\n                    meta.discourse_post_id !== prevMeta.discourse_post_id ||\n                    meta.wpdc_publishing_response !== prevMeta.wpdc_publishing_response ||\n                    meta.wpdc_publishing_error !== prevMeta.wpdc_publishing_error ) ) {\n                const publishToDiscourse = ( 'deleted_topic' === meta.wpdc_publishing_error || 'queued_topic' === meta.wpdc_publishing_error) ? false : 1 === parseInt( meta.publish_to_discourse, 10 );\n                this.setState( {\n                    published: meta.discourse_post_id > 0,\n                    postStatus: post.status,\n                    publishToDiscourse: publishToDiscourse,\n                    discoursePostId: meta.discourse_post_id,\n                    discoursePermalink: meta.discourse_permalink,\n                    publishingError: meta.wpdc_publishing_error,\n                } );\n            }\n        }\n    }\n\n    render() {\n        if ( this.isAllowedPostType() ) {\n            const isPublished = this.state.published;\n            let actions;\n            if ( !isPublished ) {\n                actions =\n                    <div className={'wpdc-not-published'}>\n                        <PublishingOptions handlePublishMethodChange={ this.handlePublishMethodChange }\n                                           publishingMethod={ this.state.publishingMethod }\n                        />\n                        {'publish_post' === this.state.publishingMethod ? (\n                            <div className={ 'wpdc-publish-to-discourse' }>\n                                <CategorySelect\n                                    category_id={ this.state.publishPostCategory }\n                                    handleCategoryChange={ this.handleCategoryChange }\n                                    discourseCategories={ this.state.discourseCategories }\n                                />\n                                <TagTopic\n                                    handleTagChange={ this.handleTagChange }\n                                    tags={ this.state.topicTags }\n                                    allowTags={ this.state.allowTags }\n                                    maxTags={ this.state.maxTags }\n                                />\n                                <PinTopic\n                                    handlePinChange={ this.handlePinChange }\n                                    pinTopic={ this.state.pinTopic }\n                                    pinUntil={ this.state.pinUntil }\n                                />\n                                <PublishToDiscourse postStatus={ this.state.postStatus }\n                                                    publishToDiscourse={ this.state.publishToDiscourse }\n                                                    handleToBePublishedChange={ this.handleToBePublishedChange }\n                                                    handlePublishChange={ this.handlePublishChange }\n                                                    busy={ this.state.busyPublishing }\n                                />\n                            </div>\n                        ) : (\n                            <div className={ 'wpdc-link-to-discourse' }>\n                                <LinkToDiscourseTopic busy={ this.state.busyLinking }\n                                                      handleLinkTopicClick={ this.handleLinkTopicClick }\n                                />\n                            </div> ) }\n                    </div>\n            } else {\n                actions =\n                    <div className={ 'wpdc-published-post' }>\n                        <UpdateDiscourseTopic\n                            published={ this.state.published }\n                            busy={ this.state.busyUpdating }\n                            handleUpdateChange={ this.handleUpdateChange }\n                        />\n                        <UnlinkFromDiscourse\n                            published={ this.state.published }\n                            handleUnlinkFromDiscourseChange={ this.handleUnlinkFromDiscourseChange }\n                            busy={ this.state.busyUnlinking }\n                        />\n                    </div>\n            }\n\n            return (\n                <Fragment>\n                    <PluginSidebarMoreMenuItem target='discourse-sidebar'>\n                        { __( 'Discourse', 'wp-discourse' ) }\n                    </PluginSidebarMoreMenuItem>\n                    <PluginSidebar name='discourse-sidebar' title={ __( 'Discourse', 'wp-discourse' ) }>\n                        <PanelBody>\n                            <div className={ 'wpdc-sidebar' }>\n                                <Notification\n                                    published={ this.state.published }\n                                    publishingError={ this.state.publishingError }\n                                    discoursePermalink={ this.state.discoursePermalink }\n                                    statusMessage={ this.state.statusMessage }\n                                />\n                                { actions }\n                            </div>\n                        </PanelBody>\n                    </PluginSidebar>\n                </Fragment>\n            );\n        } else {\n            return null;\n        }\n    }\n}\n\nconst HOC = withSelect( ( select, { forceIsSaving } ) => {\n    const {\n        getCurrentPostId,\n        getCurrentPost,\n    } = select( 'core/editor' );\n    return {\n        postId: getCurrentPostId(),\n        post: getCurrentPost(),\n    };\n})( DiscourseSidebar );\n\nregisterPlugin( 'discourse-sidebar', {\n    icon: iconEl,\n    render: HOC,\n} );","(function() { module.exports = this[\"wp\"][\"element\"]; }());"],"sourceRoot":""}